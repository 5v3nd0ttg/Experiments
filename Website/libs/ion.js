var Ion=function(e,d,a,f,c,b){this.particle=[];this.clear=true;this.quantity=e||1;this.sx=a||0;this.y=f||0;this.dx=c||1;this.dy=b||1;this.wx=0;this.wy=0;this.color="#48F";this.size=d||1;this.tween_type=0;this.tween_current=0;this.tween_duration=1000};Ion.prototype.ease=function ease(a,j,e,i,h,g){if(g===0){return j*e/i+a}else{if(g==1){return j*(e/=i)*e+a}else{if(g==2){return -j*(e/=i)*(e-2)+a}else{if(g==3){return(e/=i/2)<1?j/2*e*e+a:-j/2*((--e)*(e-2)-1)+a}else{if(g==4){return j*(e/=i)*e*e+a}else{if(g==5){return j*((e=e/i-1)*e*e+1)+a}else{if(g==6){return((e/=i/2)<1)?j/2*e*e*e+a:j/2*((e-=2)*e*e+2)+a}else{if(g==7){return j*(e/=i)*e*e*e+a}else{if(g==8){return -j*((e=e/i-1)*e*e*e-1)+a}else{if(g==9){return((e/=i/2)<1)?j/2*e*e*e*e+a:-j/2*((e-=2)*e*e*e-2)+a}else{if(g==10){return j*(e/=i)*e*e*e*e+a}else{if(g==11){return j*((e=e/i-1)*e*e*e*e+1)+a}else{if(g==12){return((e/=i/2)<1)?j/2*e*e*e*e*e+a:j/2*((e-=2)*e*e*e*e+2)+a}else{if(g==13){return -j*Math.cos(e/i*(Math.PI/2))+j+a}else{if(g==14){return -j/2*(Math.cos(Math.PI*e/i)-1)+a}else{if(g==15){return(e===0)?a:j*Math.pow(2,10*(e/i-1))+a}else{if(g==16){return(e==i)?a+j:j*(-Math.pow(2,-10*e/i)+1)+a}else{if(g==17){return(e===0)?a:((e==i)?a+j:(((e/=i/2)<1)?j/2*Math.pow(2,10*(e-1))+a:(j/2*(-Math.pow(2,-10*--e)+2)+a)))}else{if(g==18){return -j*(Math.sqrt(1-(e/=i)*e)-1)+a}else{if(g==19){return j*Math.sqrt(1-(e=e/i-1)*e)+a}else{if(g==20){return((e/=i/2)<1)?-j/2*(Math.sqrt(1-e*e)-1)+a:j/2*(Math.sqrt(1-(e-=2)*e)+1)+a}else{if(g==21){return ease(this,a,j,e,i,0.5,22)}else{if(g==22){return(function(){var c=1.70158,d=0,b=j;if(e===0){return a}if((e/=i)==1){return a+j}if(!d){d=i*h}if(b<Math.abs(j+0.1)){b=j;c=d/4}else{c=d/(2*Math.PI)*Math.asin(j/b)}return -(b*Math.pow(2,10*(e-=1))*Math.sin((e*i-c)*(2*Math.PI)/d))+a})()}else{if(g==23){return ease(a,j,e,i,0.1,22)}else{if(g==24){return ease(a,j,e,i,0.5,25)}else{if(g==25){return(function(){var c=1.70158,d=0,b=j;if(e===0){return a}if((e/=i)==1){return a+j}if(!d){d=i*h}if(b<Math.abs(j+0.1)){b=j;c=d/4}else{c=d/(2*Math.PI)*Math.asin(j/b)}return b*Math.pow(2,-10*e)*Math.sin((e*i-c)*(2*Math.PI)/d)+j+a})()}else{if(g==26){return ease(a,j,e,i,0.1,25)}else{if(g==27){return ease(a,j,e,i,0.5,28)}else{if(g==28){return(function(){var c=1.70158,d=0,b=j;if(e===0){return a}if((e/=i/2)==2){return a+j}if(!d){d=i*(h*1.5)}if(b<Math.abs(j+0.1)){b=j;c=d/4}else{c=d/(2*Math.PI)*Math.asin(j/b)}if(e<1){return -0.5*(b*Math.pow(2,10*(e-=1))*Math.sin((e*i-c)*(2*Math.PI)/d))+a}return b*Math.pow(2,-10*(e-=1))*Math.sin((e*i-c)*(2*Math.PI)/d)*0.5+j+a})()}else{if(g==29){return ease(a,j,e,i,0.1,28)}else{if(g==30){return j*(e/=i)*e*((1.70158+1)*e-1.70158)+a}else{if(g==31){return j*((e=e/i-1)*e*((1.70158+1)*e+1.70158)+1)+a}else{if(g==32){var f=1.70158;return((e/=i/2)<1)?j/2*(e*e*(((f*=(1.525))+1)*e-f))+a:j/2*((e-=2)*e*(((f*=(1.525))+1)*e+f)+2)+a}else{if(g==33){return j-ease(0,j,i-e,i,0,34)+a}else{if(g==34){if((e/=i)<(1/2.75)){return j*(7.5625*e*e)+a}else{if(e<(2/2.75)){return j*(7.5625*(e-=(1.5/2.75))*e+0.75)+a}else{if(e<(2.5/2.75)){return j*(7.5625*(e-=(2.25/2.75))*e+0.9375)+a}else{return j*(7.5625*(e-=(2.625/2.75))*e+0.984375)+a}}}}else{if(g==35){if(e<i/2){return ease(0,j,e*2,i,0,33)*0.5+a}else{return ease(0,j,e*2-i,i,0,34)*0.5+j*0.5+a}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};Ion.prototype.getNew=function(a){return{id:a,sx:typeof this.sx=="function"?this.sx():this.sx,sy:typeof this.sy=="function"?this.sy():this.sy,x:typeof this.sx=="function"?this.sx():this.sx,y:typeof this.sy=="function"?this.sy():this.sy,dx:typeof this.dx=="function"?this.dx():this.dx,dy:typeof this.dy=="function"?this.dy():this.dy,c:typeof this.tween_current=="function"?this.tween_current():this.tween_current,d:typeof this.tween_duration=="function"?this.tween_duration():this.tween_duration,tt:typeof this.tween_type=="function"?this.tween_type():this.tween_type,s:typeof this.size=="function"?this.size():this.size,wx:typeof this.wx=="function"?this.wx():this.wx,wy:typeof this.wy=="function"?this.wy():this.wy}};Ion.prototype.reset=function(a){this.particle[a].x=this.particle[a].sx=typeof this.sx=="function"?this.sx():this.sx;this.particle[a].y=this.particle[a].sy=typeof this.sy=="function"?this.sy():this.sy;this.particle[a].dx=typeof this.dx=="function"?this.dx():this.dx;this.particle[a].dy=typeof this.dy=="function"?this.dy():this.dy;this.particle[a].c=0};Ion.prototype.populate=function(){var a=this;this.particle.push(this.getNew(this.particle.length));if(this.particle.length<this.quantity){setTimeout(function(){a.populate()},1)}};Ion.prototype.wind=function(a){this.particle[a].dx+=this.particle[a].wx;this.particle[a].dy+=this.particle[a].wy;this.particle[a].sx+=this.particle[a].wx;this.particle[a].sy+=this.particle[a].wy};Ion.prototype.draw=function(a){ctx.fillRect(this.particle[a].x,this.particle[a].y,this.particle[a].s,this.particle[a].s)};Ion.prototype.onEnd=function(){};Ion.prototype.onEscape=function(){};Ion.prototype.process=function(){var a=this,b;if(this.clear){ctx.fillStyle="#000";ctx.fillRect(0,0,v.w,v.h)}ctx.fillStyle=this.color;for(atom in this.particle){b=this.particle[atom];if(b.c==b.d){continue}this.wind(atom);this.draw(atom);if(b.x<0||b.y<0||b.x>v.w||b.y>v.h){this.onEscape(atom)}b.c++;if(b.c==b.d){this.onEnd(atom)}if(M.floor(b.x)!==M.floor(b.dx)){b.x=this.ease(b.sx,b.dx-b.sx,b.c,b.d,0.3,b.tt)}if(M.floor(b.y)!==M.floor(b.dy)){b.y=this.ease(b.sy,b.dy-b.sy,b.c,b.d,0.3,b.tt)}}setTimeout(function(){a.process()},1)};